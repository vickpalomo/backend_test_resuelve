<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* @fileoverview Library with the functions to calculate the salary of Resolver FC players.
*
* @author Victor Palomo &lt;ing.victorpalomo@gmail.com>
*/

/**
 * @function replaceLevels
 * @description Replace the player level with the goals required for that level.
 * @param  {JSON} dataPlayer Json with player data
 * @param  {JSON} levels Json with individual goals per team and per level.
 * @returns {JSON} Return a json with the goal of individual goals instead of the level
 */
const replaceLevels = (dataPlayer, levels) => {
  return {
    nombre: dataPlayer.nombre,
    goles_minimos: levels[dataPlayer.equipo][dataPlayer.nivel],
    goles: dataPlayer.goles,
    sueldo: dataPlayer.sueldo,
    bono: dataPlayer.bono,
    sueldo_completo: null,
    equipo: dataPlayer.equipo
  }
}

/**
 * @function teamDataToReplaceLevels
 * @description Function that goes through the array of objects and replaces the level with the required goals of that level
 * @param  {Array} players Array of players with the levels to replace
 * @param  {Object} levels Json with individual goals per team and per level.
 * @returns {Array} Returns an array of objects with the key minimum_goles instead of level
 */
const teamDataToReplaceLevels = (players, levels) => players.map(player => replaceLevels(player, levels))

/**
 * @function getPercentage
 * @description Calculate the percentage relationship between two quantities
 * @param  {Number} total Amount that represents 100% of our operation
 * @param  {Number} partial Partial quantity from which we calculate your percentage with respect to a total
 * @returns {Number} Percentage calculated with respect to two quantities
 */
const getPercentage = (total, partial) => {
  const percentage = Math.trunc(((partial * 100) / total) * 100) / 100
  return (percentage &lt; 100) ? percentage : 100
}

/**
 * @function getTotalGoalsAndPercentageTeam
 * @description Function to add up the minimum goals and scored by team and calculate the percentage between them
 * @param  {JSON} totals Accumulated goals required, scored and the percentage between them
 * @param  {JSON} player Player data by team
 * @returns {JSON} Sum of accumulated goals and percentages with current player data
 */
const getTotalGoalsAndPercentageTeam = (totals, player) => {
  totals[player.equipo] = totals[player.equipo] || {}
  totals[player.equipo].goals_required = (totals[player.equipo].goals_required || 0) + player.goles_minimos
  totals[player.equipo].goals_scored = (totals[player.equipo].goals_scored || 0) + player.goles
  totals[player.equipo].percentageTeam = getPercentage(totals[player.equipo].goals_required, totals[player.equipo].goals_scored)
  return totals
}

/**
 * @function getPercentageTeam
 * @description Function that goes through the array of players and gets the total sum of minimum goals scored by teams and the percentage between them
 * @param  {Array} teamData Array with player data
 * @returns {JSON} Total accumulated goals and percentage obtained by team
 */
const getPercentageTeam = (teamData) => teamData.reduce(getTotalGoalsAndPercentageTeam, {})

/**
 * @function getAverage
 * @description Calculate the average of two numbers
 * @param  {Number} x Number to calculate average
 * @param  {Number} y Number to calculate average
 * @returns {Number}
 */
const getAverage = (x, y) => (x + y) / 2

/**
 * @function getPercentageBond
 * @description Calculate the bonus to pay the player
 * @param  {Number} bond Player assigned bonus
 * @param  {Number} percentage Percentage of bond to pay
 * @returns {Number} Final amount to pay the bond
 */
const getPercentageBond = (bond, percentage) => Math.trunc(((percentage * bond) / 100) * 100) / 100

/**
 * @function getSalaryPlayer
 * @description Calculate the final salary to pay the player
 * @param  {JSON} player Player data
 * @param  {JSON} percentageTeam Total goals required, scored and percentage obtained by team
 * @returns {JSON} Player data with final calculated salary
 */
const getSalaryPlayer = (player, percentageTeam) => {
  const percentagePlayer = getPercentage(player.goles_minimos, player.goles)
  const averagePercentage = getAverage(percentageTeam[player.equipo].percentageTeam, percentagePlayer)
  const totalBond = getPercentageBond(player.bono, averagePercentage)
  const totalSalary = player.sueldo + totalBond
  return totalSalary
}

/**
 * @function getTotalSalary
 * @description Function to go through the array of players and calculate the total salary of each one
 * @param  {Array} teamData Players array
 * @param  {JSON} percentageTeam Total goals required, scored and percentage obtained by team
 * @returns {Array} Array of players with the final salary
 */
const getTotalSalary = (teamData, percentageTeam) => {
  console.log(percentageTeam)
  return teamData.map((player) => {
    player.sueldo_completo = getSalaryPlayer(player, percentageTeam)
    return player
  })
}
module.exports = {
  teamDataToReplaceLevels,
  getPercentageTeam,
  getTotalSalary
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getAverage">getAverage</a></li><li><a href="global.html#getPercentage">getPercentage</a></li><li><a href="global.html#getPercentageBond">getPercentageBond</a></li><li><a href="global.html#getPercentageTeam">getPercentageTeam</a></li><li><a href="global.html#getSalaryPlayer">getSalaryPlayer</a></li><li><a href="global.html#getTotalGoalsAndPercentageTeam">getTotalGoalsAndPercentageTeam</a></li><li><a href="global.html#getTotalSalary">getTotalSalary</a></li><li><a href="global.html#replaceLevels">replaceLevels</a></li><li><a href="global.html#teamDataToReplaceLevels">teamDataToReplaceLevels</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Wed Jun 03 2020 08:52:43 GMT-0500 (GMT-05:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
